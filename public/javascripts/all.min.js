angular.module("myApp",["ngRoute","ngResource"]).config(["$locationProvider",function(e){e.html5Mode(!0)}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/image_show.html",controller:"ImageController"}).when("/widgets/:widget",{templateUrl:"/widget_show.html",controller:"WidgetController"})}]),angular.module("myApp").directive("myJsonformat",function(){return{restrict:"A",scope:{jsonString:"=myJsonformat"},template:"{{jsonFormat}}",link:function(e){e.$watch("jsonString",function(n){e.jsonFormat=n})}}}).directive("myLoading",function(){return{restrict:"A",scope:{load:"&myLoading"},link:function(e,n){angular.element(document).on("scroll",function(){var t=n[0].getBoundingClientRect(),o={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};t.top<o.height&&e.load()})}}}),angular.module("myApp").controller("ExamplesController",["$scope","ExamplesService",function(e,n){e.exp=e.exp||{},n.get({widgetName:e.req.widget},function(n){n.success&&(e.exp.examples=n.content)}),e.exp.submit=function(){n.save({},{widgetName:e.req.widget,img:e.exp.img,config:e.exp.config},function(n){n.success&&(alert("添加成功"),e.exp.examples.push({img:e.exp.img,config:e.exp.config}),e.exp.flag=!e.exp.flag,e.exp.img="",e.exp.config="")})},e.exp.remove=function(t){var o=confirm("确认要删除吗？");o&&n.remove({widgetName:e.req.widget,index:t},function(n){n&&(alert("删除成功"),e.exp.examples.splice(t,1))})}}]),angular.module("myApp").controller("ImageController",["$scope","$timeout","ImageService",function(e,n,t){e.req=e.req||{},e.req.flag=!0,t.get(function(n){e.res=e.res||{},n.success&&(e.res.all=n.content,e.res.images=e.res.all.slice(0,20))}),e.req.load=function(){n(function(){e.res.images=e.res.all.slice(0,e.res.images.length+20),e.res.images.length==e.res.all.length&&(e.req.flag=!1)},1e3)}}]),angular.module("myApp").factory("ImageService",["$resource",function(e){return e("/imageService")}]),angular.module("myApp").controller("ImplsController",["$scope","ImplsService",function(e,n){e.ipl=e.ipl||{},n.get({widgetName:e.req.widget},function(n){n.success&&(e.ipl.impls=n.content)})}]),angular.module("myApp").controller("OnlineImplsController",["$scope","OnlineImplsService",function(e,n){e.opl=e.opl||{},n.get({implName:e.req.impl},function(n){n.success&&(e.opl.onlineImpls=n.content)})}]),angular.module("myApp").controller("SpecController",["$scope","SpecService",function(e,n){e.spc=e.spc||{},e.spc.editable=!1,n.get({widgetName:e.req.widget},function(n){n.success&&(e.spc.spec=n.content)}),e.spc.update=function(){n.save({},{widgetName:e.req.widget,spec:e.spc.spec},function(n){n.success&&(alert("更新成功"),e.spc.editable=!1)})}}]),angular.module("myApp").controller("WidgetController",["$scope","$routeParams",function(e,n){e.req=e.req||{},e.req.widget=n.widget,e.req.url="/examples_show.html",e.req.flag=!1,e.res=e.res||{}}]),angular.module("myApp").factory("ExamplesService",["$resource",function(e){return e("/examplesService")}]).factory("SpecService",["$resource",function(e){return e("/specService")}]).factory("ImplsService",["$resource",function(e){return e("/implsService")}]).factory("OnlineImplsService",["$resource",function(e){return e("/onlineImplsService")}]);