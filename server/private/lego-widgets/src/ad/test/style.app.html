<!doctype html>
<!--
/***************************************************************************
 *
 * Copyright (c) 2012 Baidu.com, Inc. All Rights Reserved
 * $Id: style.app.html 12478 2012-10-08 08:28:49Z liyubei $
 *
 **************************************************************************/



/**
 * src/ad/test/style.app.html ~ 2012/08/08 21:41:35
 * @author leeight@gmail.com (leeight)
 * @version $Revision: 12478 $ 
 * @description
 *
 **/
-->
<html>
<head>
    <meta charset="utf-8" />
    <title>样式编辑</title>
    <script type="text/javascript" src="../../../assets/js/tangram-base-1.3.7.1.js"></script>
    <script type="text/javascript" src="../../../assets/js/mustache.js"></script>
    <script type="text/javascript" src="../../base.js"></script>
    <script type="text/javascript" src="../../jn/demo/er_ad_widget_list.data.js"></script>
    <script type="text/javascript" src="//bs.baidu.com/adtest/7c5b3b485426dc5208bd28b5a7e9a995.js"></script>
    <script type="text/javascript">
        goog.require('app.Launch');
        goog.require('ad.test.style');
        goog.include('third_party/bootstrap/css/bootstrap.css');
        goog.include('third_party/bootstrap/css/bootstrap-responsive.css');
        goog.include('third_party/bootstrap/css/docs.css');
        goog.include('ad/test/last.less');
    </script>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="">素材库</a>
        </div>
    </div>
</div>

<header class="jumbotron subhead">
    <div class="container">
        <h3>ad.style.Editor(r8964)</h3>
    </div>
</header>

<div class="container">
    <div class="row">
        <div class="span12">
            <section class="alert alert-info">
                用来定制ad.widget.Widget的样式，需要对应的配置文件存在．例如：src/ad/widget/*.style.config.json
            </section>
        <div>
    </div>

    <div class="row">
        <div class="span4">
            <section style="position:relative">
                <div id="json-editor">{
    "selectors" : [
        {
            "name" : ".ad-widget-h1",
            "display_name" : "基本设置",
            "options" : ["font-size"]
        },
        {
            "name" : ".ad-widget-h1 h2",
            "display_name" : "标题设置",
            "options" : ["font-family", "color", "font-size"]
        },
        {
            "name" : ".ad-widget-h1 .content",
            "display_name" : "站点设置",
            "options" : ["color"]
        },
        {
            "name" : ".ad-widget-h1 .content .site",
            "display_name" : "站点设置",
            "options" : ["color"]
        }
    ]
}
</div>
            </section>
        </div>
        <div class="span4">
            <section>
                <div id="ws"></div>
            </section>
        </div>
        <div class="span4">
            <section style="position:relative">
                <div id="css-editor"></div>
            </section>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
app.Launch(function(){
    function refresh() {
        try {
            var json = baidu.json.parse(jsonEditor.getValue());
            ad.test.style.renderFromJson(json, function(css){
                cssEditor.setValue(css);
            });
        } catch(e) {
            // IGNORE ERROR
            // alert("Invalid json.")
        }
    }

    var cssEditor = ace.edit("css-editor");
    cssEditor.setTheme("ace/theme/monokai");
    cssEditor.getSession().setMode("ace/mode/css");

    var jsonEditor = ace.edit("json-editor");
    jsonEditor.setTheme("ace/theme/monokai");
    jsonEditor.getSession().setMode("ace/mode/json");
    jsonEditor.getSession().on('change', function(e) {
        refresh();
    });
    refresh();
});
</script>
</html>
