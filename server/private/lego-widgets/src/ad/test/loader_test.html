<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Loader Test</title>
  </head>
  <body>
    <!-- BEGIN 准备好容器-->
    <div id="canvas"></div>
    <!-- END 准备好容器-->

    <script src="../../base.js"></script>
    <script src="../../../assets/js/tangram-base-1.3.7.1.js"></script>
    <script>
    goog.require("ad.plugin.loader");
    </script>
    <script>
    function URL(name, opt_delay) {
      var delay = opt_delay || parseInt(Math.random() * 5, 10);
      var url = 'http://cq01-rdqa-pool017.cq01.baidu.com:8964/src/ad/test/data/' + name;
      var realUrl = 'http://cq01-rdqa-pool017.cq01.baidu.com:8080/service/dev/default/fetch?url=' + encodeURIComponent(url) + '&delay=' + encodeURIComponent(delay);
      return realUrl;
    }

    var moduleIds = [];
    for(var i = 1; i < 10; i ++) {
        moduleIds.push(URL('ad' + i + '.js'));
        // moduleIds.push(('http://leeight.baidu.com:8080/src/ad/test/data/ad' + i + '.js'));
    }
    var start = new Date().getTime();
    ECMA_require(moduleIds, function(){
        var rv = [];
        for(var i = 0; i < arguments.length; i ++) {
            rv.push(arguments[i]);
        }
        var end = new Date().getTime();
        document.getElementById('canvas').innerHTML = 'TIME:' + (end - start) + 'ms => ' + rv.join(';');

        var s2 = new Date().getTime();
        ECMA_require(moduleIds, function(){
            var rv = [];
            for(var i = 0; i < arguments.length; i ++) {
                rv.push(arguments[i]);
            }
            var e2 = new Date().getTime();
            document.getElementById('canvas').innerHTML += '<br>TIME:' + (e2 - s2) + 'ms => ' + rv.join(';');
        });
    });
    </script>
  </body>
</html>
