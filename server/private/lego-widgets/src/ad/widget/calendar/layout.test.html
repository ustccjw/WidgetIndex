<!doctype html>
<!--
/***************************************************************************
 *
 * Copyright (c) 2012 Baidu.com, Inc. All Rights Reserved
 * $Id: layout.test.html 14263 2012-11-11 14:26:04Z liyubei $
 *
 **************************************************************************/



/**
 * src/ad/widget/calendar/layout.test.html ~ 2012/05/10 10:49:04
 * @author liyubei@baidu.com (liyubei)
 * @version $Revision: 14263 $ 
 * @description
 *
 **/
-->
<html>
<head>
    <meta charset="utf-8" />
    <title>[TEST]ad.widget.calendar.Layout</title>
    <script type="text/javascript" src="../../../../assets/js/tangram-base-1.3.7.1.js"></script>
    <script type="text/javascript" src="../../../../assets/js/mustache.js"></script>
    <script type="text/javascript" src="../../../base.js"></script>
    <script type="text/javascript">
        goog.require('ad.Debug');
        goog.require('ad.widget.calendar.Layout');
        goog.require('third_party.qunit.Qunit');
    </script>
</head>
<body>
  <div id="qunit"></div>
  <div id="root"></div>
</body>
<script type="text/javascript">
function bootstrap() {
  test("empty event item", function(){
    var events = [
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
    ];
    deepEqual(layout, expected);
  });

  test("one event item", function(){
    var events = [
      {'id': 1, 'start': 60, 'end': 120 }
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
      {'id': 1, 'start': 60, 'end': 120, 'left': 0, 'width': 1}
    ];
    deepEqual(layout, expected);
  });

  test("two event items without intersection", function(){
    var events = [
      {'id': 1, 'start': 60, 'end': 120 },
      {'id': 2, 'start': 120, 'end': 180 }
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
      {'id': 1, 'start': 60, 'end': 120, 'left': 0, 'width': 1 },
      {'id': 2, 'start': 120, 'end': 180, 'left': 0, 'width': 1}
    ];
    deepEqual(layout, expected);
  });

  test("two event items with intersection", function(){
    var events = [
      {'id': 1, 'start': 60, 'end': 120 },
      {'id': 2, 'start': 70, 'end': 130 }
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
      {'id': 1, 'start': 60, 'end': 120, 'left': 0, 'width': 0.5 },
      {'id': 2, 'start': 70, 'end': 130, 'left': 0.5, 'width': 0.5 }
    ];
    deepEqual(layout, expected);
  });

  test("three event items with intersection", function(){
    var events = [
      {'id': 1, 'start': 60, 'end': 120 },
      {'id': 2, 'start': 70, 'end': 130 },
      {'id': 3, 'start': 80, 'end': 140 }
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
      {'id': 1, 'start': 60, 'end': 120, 'left': 0, 'width': 0.3333333333333333 },
      {'id': 2, 'start': 70, 'end': 130, 'left':0.3333333333333333, 'width': 0.3333333333333333 },
      {'id': 3, 'start': 80, 'end': 140, 'left': 0.6666666666666666, 'width': 0.3333333333333333 }
    ];
    deepEqual(layout, expected);
  });

  test("four event items with intersection", function(){
    var events = [
      {'id': 1, 'start': 60, 'end': 120 },
      {'id': 2, 'start': 70, 'end': 130 },
      {'id': 3, 'start': 80, 'end': 200 },
      {'id': 4, 'start': 125, 'end': 185 }
    ];
    var layout = ad.widget.calendar.Layout(events);
    var expected = [
      {'id': 1, 'start': 60, 'end': 120, 'left': 0, 'width': 0.3333333333333333 },
      {'id': 2, 'start': 70, 'end': 130, 'left':0.3333333333333333, 'width': 0.3333333333333333 },
      {'id': 3, 'start': 80, 'end': 200, 'left': 0.6666666666666666, 'width': 0.3333333333333333 },
      {'id': 4, 'start': 125, 'end': 185, 'left': 0, 'width': 0.3333333333333333 }
    ];
    deepEqual(layout, expected);
  });
}

ad.Debug(bootstrap);
</script>
</html>
